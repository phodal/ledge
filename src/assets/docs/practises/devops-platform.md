# DevOps 平台

## DevOps 数字化转型

```pyramid
 - DevOps 数字化转型框架
   - 价值驱动 <br> 精益，敏捷：创新组织、
   - 问题管理，事件管理，安全 <br> 知识管理，容量管理，成本管理等：精细化管理过程
   - 持续交付，统一监控，度量分析 <br> 容器管理，DevOps 服务，DevOps 作业：演进式能力中台
   - 持续集成，看板方法，凤凰系统 <br> 测试驱动开发，微架构，多级监控：持续性能力建设
```

## 研发服务平台

### 看板

在通过研讨会（快速启动会议）来开发项目/产品待办事项并确定项目范围之后，通常会使用带有评估和团队速度度量的看板（Scrum 板），可以观察到

- 确定预计完成时间（发布计划）
- 了解范围的添加将如何影响发布计划
- 未来/额外工作的规模
- 了解故事/工作如何在开发过程中移动
- 清晰地看到并识别生产力的瓶颈

那么看板应该层现哪些内容：

- 要完成的故事列表/项目的一般积压
- 任务的一般优先级（排序…通常越靠前优先级越高）
- 项目状态的高层次视图（是否已提取、正在处理或已完成）

## 持续交付平台

能力：

- 持续构建
- 持续测试
- 持续部署
- 持续发布
- 持续反馈

### 流程

示例：

### DevOps 流水线的跨功能需求

来源 《DevOps 架构师行动指南》

| 跨功能需求 | 质量关注点                                                                     |
| ---------- | ------------------------------------------------------------------------------ |
| 可重复性   | 重复相同操作的可能性的程度                                                     |
| 性能       | 执行 DevOps 操作所需要的时间和资源                                             |
| 可靠性     | 在一定时间周期内，DevOps 流水线及其内部各个软件保持服务状态的程度              |
| 可恢复性   | 失败的 DevOps 操作可以恢复到期望状态的程度，而仅对它所操作的应用千万极小的影响 |
| 互操作性   | 在特定环境下，不同 DevOps 工具通过接口有效地交换信息的程度                     |
| 可测试性   | 通过测试，DevOps 运维软件能够很容易地展示其错误                                |
| 可修改性   | 修改 DevOps 软件、过程或者应用程序运维环境所需要的工作量                       |

实现这种质量的技术总结：

| 跨功能需求 | 实现这种质量的技术                                                                                                                   |
| ---------- | ------------------------------------------------------------------------------------------------------------------------------------ |
| 可重复性   | 维护活动的踪迹；版本控制一切；使用配置管理数据库来维护参数；在需要的地方执行                                                         |
| 性能       | 测量以判断过程中的瓶颈；在它未使用时拆解环境；在云上执行尽可能多的操作，因为云上的资源在未使用时可以释放                             |
| 可靠性     | 识别不同服务的故障率；对高故障率的服务建立镜像；通过工具尽可能快地检测故障，这些工具的任务是监控组件以发现其执行时间处在正常范围以外 |
| 可恢复性   | 在脚本中内置异常处理；为监控服务提供信息；保证生成合成的诊断信息以支持更快地调度                                                     |
| 互操作性   | 选择那些具有稳定接口和灵活脚本能力的工具；保证流水线的不同阶段的数据模型是一致的                                                     |
| 可测试性   | 为专用工具使用单元和集成测试；协调测试用例与监控规则                                                                                 |
| 可修改性   | 基于对工具的预期变化来更新模块化脚本；将运维运作封装到小模块中，这些小模块之间是松耦合的                                             |

示例：

```kanban
 - Kanban
     - ToDo
       - Story 4
       - Story 2
       - Story 3
       - Story 5
     - Analysis
     - Ready for Dev
        - Story 1
     - In Dev
     - Ready for QA
     - In QA
     - Done
```

## DevOps 服务平台

通用能力：

- 分布式缓存服务
- 数据库服务
- 消息队列服务
- 消息通知服务
- 秘钥管理服务

### 协同服务平台

如 ChatOps

通用能力：

- 即时消息工具
- 操作机器人
- 工具集成服务

## 部署平台

### PAAS 平台

—— 《Java 持续交付》

一个部署平台应该提供以下功能：

- 一个用于托管应用程序的、用户可以访问的物理位置
- 编程语言运行环境（如 Java）
- 持久化存储，可以是块存储或者数据库
- 能够访问（或者）安装所需要的中间件，如 ESB 或者消息队列
- 自我修复或自愈的，即可以自动重启失败的应用程序
- 服务发现，一种用来查找应用程序和其他服务和第三方服务的机制
- 基本的安全控制，包含经过案例加固的机器镜像、受限的端口访问，以及访问控制面板时要求提供强身份验证
- 了解运维方面产生的成本

### 容器管理平台

容器平台组件：

- 容器技术
- 容器调度 / 编排器。该组件负责启动、停止和管理容器进程，如 Docker Swarm 或者 Kubernetes。
- 存储。
- 网络。
- 服务。
- 持续交付服务。

### 持续交付容器

### FAAS 平台

#### Serverless

> Serverless 架构是指大量依赖第三方服务（也叫做后端即服务，即“BaaS”）或暂存容器中运行的自定义代码（函数即服务，即“FaaS”）的应用程序，函数是无服务器架构中抽象语言运行时的最小单位。在这种架构中，我们并不看重运行一个函数需要多少 CPU 或 RAM 或任何其他资源，而是更看重运行函数所需的时间，我们也只为这些函数的运行时间付费。 ——《[Serverless 架构应用开发指南](https://serverless.ink/)》

## 统一监控平台

通用能力：

- 基础设施监控服务
- 系统及组件监控服务
- 应用级监控服务
- 服务级监控服务
- 用户侧监控服务

## 度量分析平台

通用能力：

- 日志分析服务
- 数据可视化服务
- 分布式跟踪服务
- 大数据分析服务
